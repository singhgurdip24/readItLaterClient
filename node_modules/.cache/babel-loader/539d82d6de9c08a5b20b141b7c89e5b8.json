{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = wrapperRaf;\n\nvar _raf = _interopRequireDefault(require(\"raf\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar id = 0;\nvar ids = {}; // Support call raf with delay specified frame\n\nfunction wrapperRaf(callback) {\n  var delayFrames = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var myId = id++;\n  var restFrames = delayFrames;\n\n  function internalCallback() {\n    restFrames -= 1;\n\n    if (restFrames <= 0) {\n      callback();\n      delete ids[myId];\n    } else {\n      ids[myId] = (0, _raf[\"default\"])(internalCallback);\n    }\n  }\n\n  ids[myId] = (0, _raf[\"default\"])(internalCallback);\n  return myId;\n}\n\nwrapperRaf.cancel = function cancel(pid) {\n  if (pid === undefined) return;\n\n  _raf[\"default\"].cancel(ids[pid]);\n\n  delete ids[pid];\n};\n\nwrapperRaf.ids = ids; // export this for test usage","map":{"version":3,"sources":["_util/raf.js"],"names":["id","ids","delayFrames","myId","restFrames","callback","wrapperRaf","pid","raf"],"mappings":";;;;;;;AAAA,IAAA,IAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,KAAA,CAAA,CAAA;;;;;;;;AACA,IAAIA,EAAE,GAAN,CAAA;AACA,IAAMC,GAAG,GAAT,EAAA,C,CACA;;AACe,SAAA,UAAA,CAAA,QAAA,EAA+C;AAAA,MAAjBC,WAAiB,GAAA,SAAA,CAAA,MAAA,GAAA,CAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAAH,CAAG;AAC1D,MAAMC,IAAI,GAAGH,EAAb,EAAA;AACA,MAAII,UAAU,GAAd,WAAA;;AACA,WAAA,gBAAA,GAA4B;AACxBA,IAAAA,UAAU,IAAVA,CAAAA;;AACA,QAAIA,UAAU,IAAd,CAAA,EAAqB;AACjBC,MAAAA,QAAQ;AACR,aAAOJ,GAAG,CAAV,IAAU,CAAV;AAFJ,KAAA,MAIK;AACDA,MAAAA,GAAG,CAAHA,IAAG,CAAHA,GAAY,CAAA,GAAA,IAAA,CAAA,SAAA,CAAA,EAAZA,gBAAY,CAAZA;AACH;AACJ;;AACDA,EAAAA,GAAG,CAAHA,IAAG,CAAHA,GAAY,CAAA,GAAA,IAAA,CAAA,SAAA,CAAA,EAAZA,gBAAY,CAAZA;AACA,SAAA,IAAA;AACH;;AACDK,UAAU,CAAVA,MAAAA,GAAoB,SAAA,MAAA,CAAA,GAAA,EAAqB;AACrC,MAAIC,GAAG,KAAP,SAAA,EACI;;AACJC,EAAAA,IAAAA,CAAAA,SAAAA,CAAAA,CAAAA,MAAAA,CAAWP,GAAG,CAAdO,GAAc,CAAdA;;AACA,SAAOP,GAAG,CAAV,GAAU,CAAV;AAJJK,CAAAA;;AAMAA,UAAU,CAAVA,GAAAA,GAAAA,GAAAA,C,CAAsB","sourcesContent":["import raf from 'raf';\nlet id = 0;\nconst ids = {};\n// Support call raf with delay specified frame\nexport default function wrapperRaf(callback, delayFrames = 1) {\n    const myId = id++;\n    let restFrames = delayFrames;\n    function internalCallback() {\n        restFrames -= 1;\n        if (restFrames <= 0) {\n            callback();\n            delete ids[myId];\n        }\n        else {\n            ids[myId] = raf(internalCallback);\n        }\n    }\n    ids[myId] = raf(internalCallback);\n    return myId;\n}\nwrapperRaf.cancel = function cancel(pid) {\n    if (pid === undefined)\n        return;\n    raf.cancel(ids[pid]);\n    delete ids[pid];\n};\nwrapperRaf.ids = ids; // export this for test usage\n"]},"metadata":{},"sourceType":"script"}