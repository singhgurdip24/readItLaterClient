{"ast":null,"code":"import\"antd/es/button/style\";import _Button from\"antd/es/button\";import\"antd/es/input/style\";import _Input from\"antd/es/input\";import\"antd/es/icon/style\";import _Icon from\"antd/es/icon\";import\"antd/es/notification/style\";import _notification from\"antd/es/notification\";import _assertThisInitialized from\"/Users/gurdipsingh/git/polling-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _classCallCheck from\"/Users/gurdipsingh/git/polling-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/gurdipsingh/git/polling-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/gurdipsingh/git/polling-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/gurdipsingh/git/polling-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/gurdipsingh/git/polling-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import\"antd/es/form/style\";import _Form from\"antd/es/form\";import React,{Component}from'react';import{login}from'../../util/APIUtils';import'./Login.css';import{Link}from'react-router-dom';import{ACCESS_TOKEN}from'../../constants';var FormItem=_Form.Item;var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);function Login(){_classCallCheck(this,Login);return _possibleConstructorReturn(this,_getPrototypeOf(Login).apply(this,arguments));}_createClass(Login,[{key:\"render\",value:function render(){var AntWrappedLoginForm=_Form.create()(LoginForm);return React.createElement(\"div\",{className:\"login-container\"},React.createElement(\"h1\",{className:\"page-title\"},\"Login\"),React.createElement(\"div\",{className:\"login-content\"},React.createElement(AntWrappedLoginForm,{onLogin:this.props.onLogin})));}}]);return Login;}(Component);var LoginForm=/*#__PURE__*/function(_Component2){_inherits(LoginForm,_Component2);function LoginForm(props){var _this;_classCallCheck(this,LoginForm);_this=_possibleConstructorReturn(this,_getPrototypeOf(LoginForm).call(this,props));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(LoginForm,[{key:\"handleSubmit\",value:function handleSubmit(event){var _this2=this;event.preventDefault();this.props.form.validateFields(function(err,values){if(!err){var loginRequest=Object.assign({},values);login(loginRequest).then(function(response){localStorage.setItem(ACCESS_TOKEN,response.accessToken);_this2.props.onLogin();}).catch(function(error){if(error.status===401){_notification.error({message:'Polling App',description:'Your Username or Password is incorrect. Please try again!'});}else{_notification.error({message:'Polling App',description:error.message||'Sorry! Something went wrong. Please try again!'});}});}});}},{key:\"render\",value:function render(){var getFieldDecorator=this.props.form.getFieldDecorator;return React.createElement(_Form,{onSubmit:this.handleSubmit,className:\"login-form\"},React.createElement(FormItem,null,getFieldDecorator('usernameOrEmail',{rules:[{required:true,message:'Please input your username or email!'}]})(React.createElement(_Input,{prefix:React.createElement(_Icon,{type:\"user\"}),size:\"large\",name:\"usernameOrEmail\",placeholder:\"Username or Email\"}))),React.createElement(FormItem,null,getFieldDecorator('password',{rules:[{required:true,message:'Please input your Password!'}]})(React.createElement(_Input,{prefix:React.createElement(_Icon,{type:\"lock\"}),size:\"large\",name:\"password\",type:\"password\",placeholder:\"Password\"}))),React.createElement(FormItem,null,React.createElement(_Button,{type:\"primary\",htmlType:\"submit\",size:\"large\",className:\"login-form-button\"},\"Login\"),\"Or \",React.createElement(Link,{to:\"/signup\"},\"register now!\")));}}]);return LoginForm;}(Component);export default Login;","map":{"version":3,"sources":["/Users/gurdipsingh/git/polling-app-client/src/user/login/Login.js"],"names":["React","Component","login","Link","ACCESS_TOKEN","FormItem","Item","Login","AntWrappedLoginForm","create","LoginForm","props","onLogin","handleSubmit","bind","event","preventDefault","form","validateFields","err","values","loginRequest","Object","assign","then","response","localStorage","setItem","accessToken","catch","error","status","message","description","getFieldDecorator","rules","required"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { login } from '../../util/APIUtils';\nimport './Login.css';\nimport { Link } from 'react-router-dom';\nimport { ACCESS_TOKEN } from '../../constants';\n\nimport { Form, Input, Button, Icon, notification } from 'antd';\nconst FormItem = Form.Item;\n\nclass Login extends Component {\n    render() {\n        const AntWrappedLoginForm = Form.create()(LoginForm)\n        return (\n            <div className=\"login-container\">\n                <h1 className=\"page-title\">Login</h1>\n                <div className=\"login-content\">\n                    <AntWrappedLoginForm onLogin={this.props.onLogin} />\n                </div>\n            </div>\n        );\n    }\n}\n\nclass LoginForm extends Component {\n    constructor(props) {\n        super(props);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n\n    handleSubmit(event) {\n        event.preventDefault();   \n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                const loginRequest = Object.assign({}, values);\n                login(loginRequest)\n                .then(response => {\n                    localStorage.setItem(ACCESS_TOKEN, response.accessToken);\n                    this.props.onLogin();\n                }).catch(error => {\n                    if(error.status === 401) {\n                        notification.error({\n                            message: 'Polling App',\n                            description: 'Your Username or Password is incorrect. Please try again!'\n                        });                    \n                    } else {\n                        notification.error({\n                            message: 'Polling App',\n                            description: error.message || 'Sorry! Something went wrong. Please try again!'\n                        });                                            \n                    }\n                });\n            }\n        });\n    }\n\n    render() {\n        const { getFieldDecorator } = this.props.form;\n        return (\n            <Form onSubmit={this.handleSubmit} className=\"login-form\">\n                <FormItem>\n                    {getFieldDecorator('usernameOrEmail', {\n                        rules: [{ required: true, message: 'Please input your username or email!' }],\n                    })(\n                    <Input \n                        prefix={<Icon type=\"user\" />}\n                        size=\"large\"\n                        name=\"usernameOrEmail\" \n                        placeholder=\"Username or Email\" />    \n                    )}\n                </FormItem>\n                <FormItem>\n                {getFieldDecorator('password', {\n                    rules: [{ required: true, message: 'Please input your Password!' }],\n                })(\n                    <Input \n                        prefix={<Icon type=\"lock\" />}\n                        size=\"large\"\n                        name=\"password\" \n                        type=\"password\" \n                        placeholder=\"Password\"  />                        \n                )}\n                </FormItem>\n                <FormItem>\n                    <Button type=\"primary\" htmlType=\"submit\" size=\"large\" className=\"login-form-button\">Login</Button>\n                    Or <Link to=\"/signup\">register now!</Link>\n                </FormItem>\n            </Form>\n        );\n    }\n}\n\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}