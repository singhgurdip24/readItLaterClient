{"ast":null,"code":"import\"antd/es/notification/style\";import _notification from\"antd/es/notification\";import _classCallCheck from\"/Users/gurdipsingh/git/polling-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/gurdipsingh/git/polling-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/gurdipsingh/git/polling-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/gurdipsingh/git/polling-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/gurdipsingh/git/polling-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/gurdipsingh/git/polling-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import\"antd/es/layout/style\";import _Layout from\"antd/es/layout\";import React,{Component}from'react';import'./App.css';import{Route,withRouter,Switch}from'react-router-dom';import{getCurrentUser}from'../util/APIUtils';import{ACCESS_TOKEN}from'../constants';import PollList from'../poll/PollList';import NewPoll from'../poll/NewPoll';import Login from'../user/login/Login';import Signup from'../user/signup/Signup';import Profile from'../user/profile/Profile';import AppHeader from'../common/AppHeader';import NotFound from'../common/NotFound';import LoadingIndicator from'../common/LoadingIndicator';import PrivateRoute from'../common/PrivateRoute';var Content=_Layout.Content;var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);function App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.state={currentUser:null,isAuthenticated:false,isLoading:false};_this.handleLogout=_this.handleLogout.bind(_assertThisInitialized(_this));_this.loadCurrentUser=_this.loadCurrentUser.bind(_assertThisInitialized(_this));_this.handleLogin=_this.handleLogin.bind(_assertThisInitialized(_this));_notification.config({placement:'topRight',top:70,duration:3});return _this;}_createClass(App,[{key:\"loadCurrentUser\",value:function loadCurrentUser(){var _this2=this;this.setState({isLoading:true});getCurrentUser().then(function(response){_this2.setState({currentUser:response,isAuthenticated:true,isLoading:false});}).catch(function(error){_this2.setState({isLoading:false});});}},{key:\"componentDidMount\",value:function componentDidMount(){this.loadCurrentUser();}},{key:\"handleLogout\",value:function handleLogout(){var redirectTo=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"/\";var notificationType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"success\";var description=arguments.length>2&&arguments[2]!==undefined?arguments[2]:\"You're successfully logged out.\";localStorage.removeItem(ACCESS_TOKEN);this.setState({currentUser:null,isAuthenticated:false});this.props.history.push(redirectTo);_notification[notificationType]({message:'Polling App',description:description});}},{key:\"handleLogin\",value:function handleLogin(){_notification.success({message:'Polling App',description:\"You're successfully logged in.\"});this.loadCurrentUser();this.props.history.push(\"/\");}},{key:\"render\",value:function render(){var _this3=this;if(this.state.isLoading){return React.createElement(LoadingIndicator,null);}return React.createElement(_Layout,{className:\"app-container\"},React.createElement(AppHeader,{isAuthenticated:this.state.isAuthenticated,currentUser:this.state.currentUser,onLogout:this.handleLogout}),React.createElement(Content,{className:\"app-content\"},React.createElement(\"div\",{className:\"container\"},React.createElement(Switch,null,React.createElement(Route,{exact:true,path:\"/\",render:function render(props){return React.createElement(PollList,Object.assign({isAuthenticated:_this3.state.isAuthenticated,currentUser:_this3.state.currentUser,handleLogout:_this3.handleLogout},props));}}),React.createElement(Route,{path:\"/login\",render:function render(props){return React.createElement(Login,Object.assign({onLogin:_this3.handleLogin},props));}}),React.createElement(Route,{path:\"/signup\",component:Signup}),React.createElement(Route,{path:\"/users/:username\",render:function render(props){return React.createElement(Profile,Object.assign({isAuthenticated:_this3.state.isAuthenticated,currentUser:_this3.state.currentUser},props));}}),React.createElement(PrivateRoute,{authenticated:this.state.isAuthenticated,path:\"/poll/new\",component:NewPoll,handleLogout:this.handleLogout}),React.createElement(Route,{component:NotFound})))));}}]);return App;}(Component);export default withRouter(App);","map":{"version":3,"sources":["/Users/gurdipsingh/git/polling-app-client/src/app/App.js"],"names":["React","Component","Route","withRouter","Switch","getCurrentUser","ACCESS_TOKEN","PollList","NewPoll","Login","Signup","Profile","AppHeader","NotFound","LoadingIndicator","PrivateRoute","Content","App","props","state","currentUser","isAuthenticated","isLoading","handleLogout","bind","loadCurrentUser","handleLogin","config","placement","top","duration","setState","then","response","catch","error","redirectTo","notificationType","description","localStorage","removeItem","history","push","message","success"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport {\n  Route,\n  withRouter,\n  Switch\n} from 'react-router-dom';\n\nimport { getCurrentUser } from '../util/APIUtils';\nimport { ACCESS_TOKEN } from '../constants';\n\nimport PollList from '../poll/PollList';\nimport NewPoll from '../poll/NewPoll';\nimport Login from '../user/login/Login';\nimport Signup from '../user/signup/Signup';\nimport Profile from '../user/profile/Profile';\nimport AppHeader from '../common/AppHeader';\nimport NotFound from '../common/NotFound';\nimport LoadingIndicator from '../common/LoadingIndicator';\nimport PrivateRoute from '../common/PrivateRoute';\n\nimport { Layout, notification } from 'antd';\nconst { Content } = Layout;\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentUser: null,\n      isAuthenticated: false,\n      isLoading: false\n    }\n    this.handleLogout = this.handleLogout.bind(this);\n    this.loadCurrentUser = this.loadCurrentUser.bind(this);\n    this.handleLogin = this.handleLogin.bind(this);\n\n    notification.config({\n      placement: 'topRight',\n      top: 70,\n      duration: 3,\n    });    \n  }\n\n  loadCurrentUser() {\n    this.setState({\n      isLoading: true\n    });\n    getCurrentUser()\n    .then(response => {\n      this.setState({\n        currentUser: response,\n        isAuthenticated: true,\n        isLoading: false\n      });\n    }).catch(error => {\n      this.setState({\n        isLoading: false\n      });  \n    });\n  }\n\n  componentDidMount() {\n    this.loadCurrentUser();\n  }\n\n  handleLogout(redirectTo=\"/\", notificationType=\"success\", description=\"You're successfully logged out.\") {\n    localStorage.removeItem(ACCESS_TOKEN);\n\n    this.setState({\n      currentUser: null,\n      isAuthenticated: false\n    });\n\n    this.props.history.push(redirectTo);\n    \n    notification[notificationType]({\n      message: 'Polling App',\n      description: description,\n    });\n  }\n\n  handleLogin() {\n    notification.success({\n      message: 'Polling App',\n      description: \"You're successfully logged in.\",\n    });\n    this.loadCurrentUser();\n    this.props.history.push(\"/\");\n  }\n\n  render() {\n    if(this.state.isLoading) {\n      return <LoadingIndicator />\n    }\n    return (\n        <Layout className=\"app-container\">\n          <AppHeader isAuthenticated={this.state.isAuthenticated} \n            currentUser={this.state.currentUser} \n            onLogout={this.handleLogout} />\n\n          <Content className=\"app-content\">\n            <div className=\"container\">\n              <Switch>      \n                <Route exact path=\"/\" \n                  render={(props) => <PollList isAuthenticated={this.state.isAuthenticated} \n                      currentUser={this.state.currentUser} handleLogout={this.handleLogout} {...props} />}>\n                </Route>\n                <Route path=\"/login\" \n                  render={(props) => <Login onLogin={this.handleLogin} {...props} />}></Route>\n                <Route path=\"/signup\" component={Signup}></Route>\n                <Route path=\"/users/:username\" \n                  render={(props) => <Profile isAuthenticated={this.state.isAuthenticated} currentUser={this.state.currentUser} {...props}  />}>\n                </Route>\n                <PrivateRoute authenticated={this.state.isAuthenticated} path=\"/poll/new\" component={NewPoll} handleLogout={this.handleLogout}></PrivateRoute>\n                <Route component={NotFound}></Route>\n              </Switch>\n            </div>\n          </Content>\n        </Layout>\n    );\n  }\n}\n\nexport default withRouter(App);\n"]},"metadata":{},"sourceType":"module"}