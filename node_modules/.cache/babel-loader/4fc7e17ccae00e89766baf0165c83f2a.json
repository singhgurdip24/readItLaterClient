{"ast":null,"code":"import\"antd/es/icon/style\";import _Icon from\"antd/es/icon\";import\"antd/es/button/style\";import _Button from\"antd/es/button\";import\"antd/es/avatar/style\";import _Avatar from\"antd/es/avatar\";import _classCallCheck from\"/Users/gurdipsingh/git/polling-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/gurdipsingh/git/polling-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/gurdipsingh/git/polling-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/gurdipsingh/git/polling-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/gurdipsingh/git/polling-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import\"antd/es/radio/style\";import _Radio from\"antd/es/radio\";import React,{Component}from'react';import'./Poll.css';import{Link}from'react-router-dom';import{getAvatarColor}from'../util/Colors';import{formatDateTime}from'../util/Helpers';var RadioGroup=_Radio.Group;var Poll=/*#__PURE__*/function(_Component){_inherits(Poll,_Component);function Poll(){var _getPrototypeOf2;var _this;_classCallCheck(this,Poll);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Poll)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.calculatePercentage=function(choice){if(_this.props.poll.totalVotes===0){return 0;}return choice.voteCount*100/_this.props.poll.totalVotes;};_this.isSelected=function(choice){return _this.props.poll.selectedChoice===choice.id;};_this.getWinningChoice=function(){return _this.props.poll.choices.reduce(function(prevChoice,currentChoice){return currentChoice.voteCount>prevChoice.voteCount?currentChoice:prevChoice;},{voteCount:-Infinity});};_this.getTimeRemaining=function(poll){var expirationTime=new Date(poll.expirationDateTime).getTime();var currentTime=new Date().getTime();var difference_ms=expirationTime-currentTime;var seconds=Math.floor(difference_ms/1000%60);var minutes=Math.floor(difference_ms/1000/60%60);var hours=Math.floor(difference_ms/(1000*60*60)%24);var days=Math.floor(difference_ms/(1000*60*60*24));var timeRemaining;if(days>0){timeRemaining=days+\" days left\";}else if(hours>0){timeRemaining=hours+\" hours left\";}else if(minutes>0){timeRemaining=minutes+\" minutes left\";}else if(seconds>0){timeRemaining=seconds+\" seconds left\";}else{timeRemaining=\"less than a second left\";}return timeRemaining;};return _this;}_createClass(Poll,[{key:\"render\",value:function render(){var _this2=this;var pollChoices=[];if(this.props.poll.selectedChoice||this.props.poll.expired){var winningChoice=this.props.poll.expired?this.getWinningChoice():null;this.props.poll.choices.forEach(function(choice){pollChoices.push(React.createElement(CompletedOrVotedPollChoice,{key:choice.id,choice:choice,isWinner:winningChoice&&choice.id===winningChoice.id,isSelected:_this2.isSelected(choice),percentVote:_this2.calculatePercentage(choice)}));});}else{this.props.poll.choices.forEach(function(choice){pollChoices.push(React.createElement(_Radio,{className:\"poll-choice-radio\",key:choice.id,value:choice.id},choice.text));});}return React.createElement(\"div\",{className:\"poll-content\"},React.createElement(\"div\",{className:\"poll-header\"},React.createElement(\"div\",{className:\"poll-creator-info\"},React.createElement(Link,{className:\"creator-link\",to:\"/users/\".concat(this.props.poll.createdBy.username)},React.createElement(_Avatar,{className:\"poll-creator-avatar\",style:{backgroundColor:getAvatarColor(this.props.poll.createdBy.name)}},this.props.poll.createdBy.name[0].toUpperCase()),React.createElement(\"span\",{className:\"poll-creator-name\"},this.props.poll.createdBy.name),React.createElement(\"span\",{className:\"poll-creator-username\"},\"@\",this.props.poll.createdBy.username),React.createElement(\"span\",{className:\"poll-creation-date\"},formatDateTime(this.props.poll.creationDateTime)))),React.createElement(\"div\",{className:\"poll-question\"},this.props.poll.question)),React.createElement(\"div\",{className:\"poll-choices\"},React.createElement(RadioGroup,{className:\"poll-choice-radio-group\",onChange:this.props.handleVoteChange,value:this.props.currentVote},pollChoices)),React.createElement(\"div\",{className:\"poll-footer\"},!(this.props.poll.selectedChoice||this.props.poll.expired)?React.createElement(_Button,{className:\"vote-button\",disabled:!this.props.currentVote,onClick:this.props.handleVoteSubmit},\"Vote\"):null,React.createElement(\"span\",{className:\"total-votes\"},this.props.poll.totalVotes,\" votes\"),React.createElement(\"span\",{className:\"separator\"},\"\\u2022\"),React.createElement(\"span\",{className:\"time-left\"},this.props.poll.expired?\"Final results\":this.getTimeRemaining(this.props.poll))));}}]);return Poll;}(Component);function CompletedOrVotedPollChoice(props){return React.createElement(\"div\",{className:\"cv-poll-choice\"},React.createElement(\"span\",{className:\"cv-poll-choice-details\"},React.createElement(\"span\",{className:\"cv-choice-percentage\"},Math.round(props.percentVote*100)/100,\"%\"),React.createElement(\"span\",{className:\"cv-choice-text\"},props.choice.text),props.isSelected?React.createElement(_Icon,{className:\"selected-choice-icon\",type:\"check-circle-o\"}):null),React.createElement(\"span\",{className:props.isWinner?'cv-choice-percent-chart winner':'cv-choice-percent-chart',style:{width:props.percentVote+'%'}}));}export default Poll;","map":{"version":3,"sources":["/Users/gurdipsingh/git/polling-app-client/src/poll/Poll.js"],"names":["React","Component","Link","getAvatarColor","formatDateTime","RadioGroup","Group","Poll","calculatePercentage","choice","props","poll","totalVotes","voteCount","isSelected","selectedChoice","id","getWinningChoice","choices","reduce","prevChoice","currentChoice","Infinity","getTimeRemaining","expirationTime","Date","expirationDateTime","getTime","currentTime","difference_ms","seconds","Math","floor","minutes","hours","days","timeRemaining","pollChoices","expired","winningChoice","forEach","push","text","createdBy","username","backgroundColor","name","toUpperCase","creationDateTime","question","handleVoteChange","currentVote","handleVoteSubmit","CompletedOrVotedPollChoice","round","percentVote","isWinner","width"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './Poll.css';\nimport { Avatar, Icon } from 'antd';\nimport { Link } from 'react-router-dom';\nimport { getAvatarColor } from '../util/Colors';\nimport { formatDateTime } from '../util/Helpers';\n\nimport { Radio, Button } from 'antd';\nconst RadioGroup = Radio.Group;\n\nclass Poll extends Component {\n    calculatePercentage = (choice) => {\n        if(this.props.poll.totalVotes === 0) {\n            return 0;\n        }\n        return (choice.voteCount*100)/(this.props.poll.totalVotes);\n    };\n\n    isSelected = (choice) => {\n        return this.props.poll.selectedChoice === choice.id;\n    }\n\n    getWinningChoice = () => {\n        return this.props.poll.choices.reduce((prevChoice, currentChoice) => \n            currentChoice.voteCount > prevChoice.voteCount ? currentChoice : prevChoice, \n            {voteCount: -Infinity}\n        );\n    }\n\n    getTimeRemaining = (poll) => {\n        const expirationTime = new Date(poll.expirationDateTime).getTime();\n        const currentTime = new Date().getTime();\n    \n        var difference_ms = expirationTime - currentTime;\n        var seconds = Math.floor( (difference_ms/1000) % 60 );\n        var minutes = Math.floor( (difference_ms/1000/60) % 60 );\n        var hours = Math.floor( (difference_ms/(1000*60*60)) % 24 );\n        var days = Math.floor( difference_ms/(1000*60*60*24) );\n    \n        let timeRemaining;\n    \n        if(days > 0) {\n            timeRemaining = days + \" days left\";\n        } else if (hours > 0) {\n            timeRemaining = hours + \" hours left\";\n        } else if (minutes > 0) {\n            timeRemaining = minutes + \" minutes left\";\n        } else if(seconds > 0) {\n            timeRemaining = seconds + \" seconds left\";\n        } else {\n            timeRemaining = \"less than a second left\";\n        }\n        \n        return timeRemaining;\n    }\n\n    render() {\n        const pollChoices = [];\n        if(this.props.poll.selectedChoice || this.props.poll.expired) {\n            const winningChoice = this.props.poll.expired ? this.getWinningChoice() : null;\n\n            this.props.poll.choices.forEach(choice => {\n                pollChoices.push(<CompletedOrVotedPollChoice \n                    key={choice.id} \n                    choice={choice}\n                    isWinner={winningChoice && choice.id === winningChoice.id}\n                    isSelected={this.isSelected(choice)}\n                    percentVote={this.calculatePercentage(choice)} \n                />);\n            });                \n        } else {\n            this.props.poll.choices.forEach(choice => {\n                pollChoices.push(<Radio className=\"poll-choice-radio\" key={choice.id} value={choice.id}>{choice.text}</Radio>)\n            })    \n        }        \n        return (\n            <div className=\"poll-content\">\n                <div className=\"poll-header\">\n                    <div className=\"poll-creator-info\">\n                        <Link className=\"creator-link\" to={`/users/${this.props.poll.createdBy.username}`}>\n                            <Avatar className=\"poll-creator-avatar\" \n                                style={{ backgroundColor: getAvatarColor(this.props.poll.createdBy.name)}} >\n                                {this.props.poll.createdBy.name[0].toUpperCase()}\n                            </Avatar>\n                            <span className=\"poll-creator-name\">\n                                {this.props.poll.createdBy.name}\n                            </span>\n                            <span className=\"poll-creator-username\">\n                                @{this.props.poll.createdBy.username}\n                            </span>\n                            <span className=\"poll-creation-date\">\n                                {formatDateTime(this.props.poll.creationDateTime)}\n                            </span>\n                        </Link>\n                    </div>\n                    <div className=\"poll-question\">\n                        {this.props.poll.question}\n                    </div>\n                </div>\n                <div className=\"poll-choices\">\n                    <RadioGroup \n                        className=\"poll-choice-radio-group\" \n                        onChange={this.props.handleVoteChange} \n                        value={this.props.currentVote}>\n                        { pollChoices }\n                    </RadioGroup>\n                </div>\n                <div className=\"poll-footer\">\n                    { \n                        !(this.props.poll.selectedChoice || this.props.poll.expired) ?\n                        (<Button className=\"vote-button\" disabled={!this.props.currentVote} onClick={this.props.handleVoteSubmit}>Vote</Button>) : null \n                    }\n                    <span className=\"total-votes\">{this.props.poll.totalVotes} votes</span>\n                    <span className=\"separator\">•</span>\n                    <span className=\"time-left\">\n                        {\n                            this.props.poll.expired ? \"Final results\" :\n                            this.getTimeRemaining(this.props.poll)\n                        }\n                    </span>\n                </div>\n            </div>\n        );\n    }\n}\n\nfunction CompletedOrVotedPollChoice(props) {\n    return (\n        <div className=\"cv-poll-choice\">\n            <span className=\"cv-poll-choice-details\">\n                <span className=\"cv-choice-percentage\">\n                    {Math.round(props.percentVote * 100) / 100}%\n                </span>            \n                <span className=\"cv-choice-text\">\n                    {props.choice.text}\n                </span>\n                {\n                    props.isSelected ? (\n                    <Icon\n                        className=\"selected-choice-icon\"\n                        type=\"check-circle-o\"\n                    /> ): null\n                }    \n            </span>\n            <span className={props.isWinner ? 'cv-choice-percent-chart winner': 'cv-choice-percent-chart'} \n                style={{width: props.percentVote + '%' }}>\n            </span>\n        </div>\n    );\n}\n\n\nexport default Poll;"]},"metadata":{},"sourceType":"module"}